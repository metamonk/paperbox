23:13:31.293 Running build in Washington, D.C., USA (East) – iad1
23:13:31.294 Build machine configuration: 4 cores, 8 GB
23:13:31.309 Cloning github.com/metamonk/paperbox (Branch: feat/w2-advanced-features, Commit: 592ca71)
23:13:31.596 Cloning completed: 287.000ms
23:13:32.089 Restored build cache from previous deployment (62Jo1pRa3ucsLDP6zX8QydMpctNQ)
23:13:32.477 Running "vercel build"
23:13:32.918 Vercel CLI 48.2.9
23:13:33.537 Warning: Detected "engines": { "node": ">=18.0.0" } in your `package.json` that will automatically upgrade when a new major Node.js Version is released. Learn More: http://vercel.link/node-version
23:13:33.561 Detected `pnpm-lock.yaml` version 9 generated by pnpm@10.x with package.json#packageManager pnpm@9.0.0
23:13:33.578 Installing dependencies...
23:13:35.819 Lockfile is up to date, resolution step is skipped
23:13:35.881 Progress: resolved 1, reused 0, downloaded 0, added 0
23:13:35.972 Packages: +208 -3
23:13:35.972 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
23:13:36.883 Progress: resolved 208, reused 0, downloaded 123, added 111
23:13:37.883 Progress: resolved 208, reused 0, downloaded 201, added 187
23:13:38.649 Progress: resolved 208, reused 0, downloaded 208, added 208, done
23:13:39.330 .../canvas@2.11.2/node_modules/canvas install$ node-pre-gyp install --fallback-to-build --update-binary
23:13:39.423 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp info it worked if it ends with ok
23:13:39.423 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp info using node-pre-gyp@1.0.11
23:13:39.424 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp info using node@22.20.0 | linux | x64
23:13:39.505 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp http GET https://github.com/Automattic/node-canvas/releases/download/v2.11.2/canvas-v2.11.2-node-v127-linux-glibc-x64.tar.gz
23:13:39.535 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! install response status 404 Not Found on https://github.com/Automattic/node-canvas/releases/download/v2.11.2/canvas-v2.11.2-node-v127-linux-glibc-x64.tar.gz 
23:13:39.536 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp WARN Pre-built binaries not installable for canvas@2.11.2 and node@22.20.0 (node-v127 ABI, glibc) (falling back to source compile with node-gyp) 
23:13:39.536 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp WARN Hit error response status 404 Not Found on https://github.com/Automattic/node-canvas/releases/download/v2.11.2/canvas-v2.11.2-node-v127-linux-glibc-x64.tar.gz 
23:13:39.587 .../canvas@2.11.2/node_modules/canvas install: gyp info it worked if it ends with ok
23:13:39.587 .../canvas@2.11.2/node_modules/canvas install: gyp info using node-gyp@10.1.0
23:13:39.587 .../canvas@2.11.2/node_modules/canvas install: gyp info using node@22.20.0 | linux | x64
23:13:39.597 .../canvas@2.11.2/node_modules/canvas install: gyp info ok 
23:13:39.644 .../canvas@2.11.2/node_modules/canvas install: gyp info it worked if it ends with ok
23:13:39.644 .../canvas@2.11.2/node_modules/canvas install: gyp info using node-gyp@10.1.0
23:13:39.644 .../canvas@2.11.2/node_modules/canvas install: gyp info using node@22.20.0 | linux | x64
23:13:39.740 .../canvas@2.11.2/node_modules/canvas install: gyp info find Python using Python version 3.12.2 found at "/usr/local/bin/python3"
23:13:39.864 .../canvas@2.11.2/node_modules/canvas install: gyp http GET https://nodejs.org/download/release/v22.20.0/node-v22.20.0-headers.tar.gz
23:13:39.944 .../canvas@2.11.2/node_modules/canvas install: gyp http 200 https://nodejs.org/download/release/v22.20.0/node-v22.20.0-headers.tar.gz
23:13:41.389 .../canvas@2.11.2/node_modules/canvas install: gyp http GET https://nodejs.org/download/release/v22.20.0/SHASUMS256.txt
23:13:41.416 .../canvas@2.11.2/node_modules/canvas install: gyp http 200 https://nodejs.org/download/release/v22.20.0/SHASUMS256.txt
23:13:41.425 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn /usr/local/bin/python3
23:13:41.425 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args [
23:13:41.425 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '/vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/gyp/gyp_main.py',
23:13:41.425 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args 'binding.gyp',
23:13:41.425 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-f',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args 'make',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-I',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/config.gypi',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-I',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '/vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/addon.gypi',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-I',
23:13:41.426 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '/vercel/.cache/node-gyp/22.20.0/include/node/common.gypi',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dlibrary=shared_library',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dvisibility=default',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dnode_root_dir=/vercel/.cache/node-gyp/22.20.0',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dnode_gyp_dir=/vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dnode_lib_file=/vercel/.cache/node-gyp/22.20.0/<(target_arch)/node.lib',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dmodule_root_dir=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Dnode_engine=v8',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '--depth=.',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '--no-parallel',
23:13:41.427 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '--generator-output',
23:13:41.428 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args 'build',
23:13:41.428 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args '-Goutput_dir=.'
23:13:41.428 .../canvas@2.11.2/node_modules/canvas install: gyp info spawn args ]
23:13:41.839 .../canvas@2.11.2/node_modules/canvas install: Package pixman-1 was not found in the pkg-config search path.
23:13:41.839 .../canvas@2.11.2/node_modules/canvas install: Perhaps you should add the directory containing `pixman-1.pc'
23:13:41.839 .../canvas@2.11.2/node_modules/canvas install: to the PKG_CONFIG_PATH environment variable
23:13:41.840 .../canvas@2.11.2/node_modules/canvas install: Package 'pixman-1', required by 'virtual:world', not found
23:13:41.840 .../canvas@2.11.2/node_modules/canvas install: gyp: Call to 'pkg-config pixman-1 --libs' returned exit status 1 while in binding.gyp. while trying to load binding.gyp
23:13:41.851 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! configure error 
23:13:41.851 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! stack Error: `gyp` failed with exit code: 1
23:13:41.851 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! stack at ChildProcess.<anonymous> (/vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/lib/configure.js:297:18)
23:13:41.851 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! stack at ChildProcess.emit (node:events:519:28)
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! stack at ChildProcess._handle.onexit (node:internal/child_process:293:12)
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! System Linux 5.10.174
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! command "/node22/bin/node" "/vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js" "configure" "--fallback-to-build" "--update-binary" "--module=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release/canvas.node" "--module_name=canvas" "--module_path=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release" "--napi_version=10" "--node_abi_napi=napi" "--napi_build_version=0" "--node_napi_label=node-v127"
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! cwd /vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! node -v v22.20.0
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! node-gyp -v v10.1.0
23:13:41.852 .../canvas@2.11.2/node_modules/canvas install: gyp ERR! not ok 
23:13:41.860 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! build error 
23:13:41.861 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! stack Error: Failed to execute '/node22/bin/node /vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --update-binary --module=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release/canvas.node --module_name=canvas --module_path=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release --napi_version=10 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v127' (1)
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (/vercel/path0/node_modules/.pnpm/@mapbox+node-pre-gyp@1.0.11/node_modules/@mapbox/node-pre-gyp/lib/util/compile.js:89:23)
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! stack     at ChildProcess.emit (node:events:519:28)
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! stack     at maybeClose (node:internal/child_process:1101:16)
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:304:5)
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! System Linux 5.10.174
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! command "/node22/bin/node" "/vercel/path0/node_modules/.pnpm/@mapbox+node-pre-gyp@1.0.11/node_modules/@mapbox/node-pre-gyp/bin/node-pre-gyp" "install" "--fallback-to-build" "--update-binary"
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! cwd /vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! node -v v22.20.0
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! node-pre-gyp -v v1.0.11
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: node-pre-gyp ERR! not ok 
23:13:41.862 .../canvas@2.11.2/node_modules/canvas install: Failed to execute '/node22/bin/node /vercel/.local/share/pnpm/.tools/pnpm/9.0.0/node_modules/pnpm/dist/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --update-binary --module=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release/canvas.node --module_name=canvas --module_path=/vercel/path0/node_modules/.pnpm/canvas@2.11.2/node_modules/canvas/build/Release --napi_version=10 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v127' (1)
23:13:41.867 .../canvas@2.11.2/node_modules/canvas install: Failed
23:13:41.959 
23:13:41.959 dependencies:
23:13:41.959 + @hookform/resolvers 5.2.2
23:13:41.959 + @radix-ui/react-collapsible 1.1.12
23:13:41.959 + @radix-ui/react-dialog 1.1.15
23:13:41.959 + @radix-ui/react-icons 1.3.2
23:13:41.959 + @radix-ui/react-label 2.1.7
23:13:41.959 + @radix-ui/react-popover 1.1.15
23:13:41.959 + @radix-ui/react-select 2.2.6
23:13:41.959 + @radix-ui/react-separator 1.1.7
23:13:41.959 + @radix-ui/react-slider 1.3.6
23:13:41.959 + @radix-ui/react-slot 1.2.3
23:13:41.959 + @radix-ui/react-toggle 1.1.10
23:13:41.959 + @radix-ui/react-toggle-group 1.1.11
23:13:41.959 + @radix-ui/react-tooltip 1.2.8
23:13:41.959 + @types/fabric 5.3.10
23:13:41.959 + class-variance-authority 0.7.1
23:13:41.959 + clsx 2.1.1
23:13:41.959 + color 5.0.2
23:13:41.959 + fabric 6.7.1
23:13:41.959 + hotkeys-js 3.13.15
23:13:41.959 + immer 10.1.3
23:13:41.960 + lucide-react 0.546.0
23:13:41.960 + motion 12.23.24
23:13:41.960 + nanoid 5.1.6
23:13:41.960 + next-themes 0.4.6
23:13:41.960 + radix-ui 1.4.3
23:13:41.960 + react-colorful 5.6.1
23:13:41.960 + react-hook-form 7.65.0
23:13:41.960 + sonner 2.0.7
23:13:41.965 + tailwind-merge 3.3.1
23:13:41.965 + use-debounce 10.0.6
23:13:41.965 + zod 4.1.12
23:13:41.965 + zustand 5.0.8
23:13:41.965 
23:13:41.965 devDependencies:
23:13:41.965 + @types/color 4.2.0
23:13:41.965 
23:13:41.978 Done in 6.6s
23:13:42.756 
23:13:42.757 > paperbox@0.0.0 build /vercel/path0
23:13:42.757 > tsc -b && vite build
23:13:42.757 
23:13:48.132 src/App.tsx(5,31): error TS2307: Cannot find module './components/ui/Toast' or its corresponding type declarations.
23:13:48.132 src/components/canvas/Canvas.tsx(27,43): error TS2307: Cannot find module './CanvasNavigationIndicator' or its corresponding type declarations.
23:13:48.132 src/components/canvas/Canvas.tsx(68,27): error TS2339: Property 'createObjectAtPosition' does not exist on type '{ handleAddShape: (type: "text" | "rectangle" | "circle") => void; }'.
23:13:48.132 src/components/canvas/Canvas.tsx(127,61): error TS2339: Property 'isPlacementMode' does not exist on type 'PaperboxStore'.
23:13:48.132 src/components/canvas/Canvas.tsx(148,50): error TS2339: Property 'placementConfig' does not exist on type 'PaperboxStore'.
23:13:48.132 src/components/canvas/Canvas.tsx(169,7): error TS2353: Object literal may only specify known properties, and 'onPlacementClick' does not exist in type 'FabricCanvasEventHandlers'.
23:13:48.132 src/components/canvas/Canvas.tsx(257,60): error TS2339: Property 'placementConfig' does not exist on type 'PaperboxStore'.
23:13:48.132 src/components/canvas/Canvas.tsx(329,15): error TS2322: Type '{ onAddShape: (type: "text" | "rectangle" | "circle") => void; onDelete: () => void; hasSelection: boolean; onTestDirectAdd: () => void; }' is not assignable to type 'IntrinsicAttributes & ToolsSidebarProps'.
23:13:48.132   Property 'onTestDirectAdd' does not exist on type 'IntrinsicAttributes & ToolsSidebarProps'.
23:13:48.133 src/components/canvas/shapes/BaseShape.tsx(20,26): error TS2307: Cannot find module '../../ui/Toast' or its corresponding type declarations.
23:13:48.133 src/features/shortcuts/NavigationShortcuts.ts(69,24): error TS2345: Argument of type '{ x: number; y: number; }' is not assignable to parameter of type 'Point'.
23:13:48.133   Type '{ x: number; y: number; }' is missing the following properties from type 'Point': add, addEquals, scalarAdd, scalarAddEquals, and 28 more.
23:13:48.133 src/features/shortcuts/NavigationShortcuts.ts(170,24): error TS2345: Argument of type '{ x: number; y: number; }' is not assignable to parameter of type 'Point'.
23:13:48.133   Type '{ x: number; y: number; }' is missing the following properties from type 'Point': add, addEquals, scalarAdd, scalarAddEquals, and 28 more.
23:13:48.133 src/hooks/useCanvasSync.ts(125,58): error TS2345: Argument of type 'UseBoundStore<WithImmer<WithDevtools<StoreApi<PaperboxStore>>>>' is not assignable to parameter of type 'ZustandStore'.
23:13:48.133   Type 'UseBoundStore<WithImmer<WithDevtools<StoreApi<PaperboxStore>>>>' is not assignable to type 'StoreApi<PaperboxStore>'.
23:13:48.133     Types of property 'setState' are incompatible.
23:13:48.133       Type '{ (nextStateOrUpdater: PaperboxStore | Partial<PaperboxStore> | ((state: WritableDraft<PaperboxStore>) => void), shouldReplace?: false | undefined, action?: Action | undefined): void; (nextStateOrUpdater: PaperboxStore | ((state: WritableDraft<...>) => void), shouldReplace: true, action?: Action | undefined): void; }' is not assignable to type '{ (partial: PaperboxStore | Partial<PaperboxStore> | ((state: PaperboxStore) => PaperboxStore | Partial<PaperboxStore>), replace?: false | undefined): void; (state: PaperboxStore | ((state: PaperboxStore) => PaperboxStore), replace: true): void; }'.
23:13:48.133         Types of parameters 'shouldReplace' and 'replace' are incompatible.
23:13:48.133           Type 'true' is not assignable to type 'false'.
23:13:48.133 src/hooks/useCanvasSync.ts(155,16): error TS2339: Property 'setupScrollPanAndZoom' does not exist on type 'FabricCanvasManager'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(298,40): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(304,33): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(305,31): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(449,15): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(523,41): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(528,29): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(597,7): error TS2531: Object is possibly 'null'.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(616,52): error TS7006: Parameter 'panX' implicitly has an 'any' type.
23:13:48.133 src/lib/fabric/FabricCanvasManager.ts(682,9): error TS2345: Argument of type '{ x: any; y: any; }' is not assignable to parameter of type 'Point'.
23:13:48.133   Type '{ x: any; y: any; }' is missing the following properties from type 'Point': add, addEquals, scalarAdd, scalarAddEquals, and 28 more.
23:13:48.134 src/lib/fabric/FabricCanvasManager.ts(866,29): error TS2345: Argument of type '{ x: number; y: number; }' is not assignable to parameter of type 'Point'.
23:13:48.134   Type '{ x: number; y: number; }' is missing the following properties from type 'Point': add, addEquals, scalarAdd, scalarAddEquals, and 28 more.
23:13:48.134 src/lib/fabric/FabricCanvasManager.ts(1153,70): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.134 src/lib/supabase/sync.ts(59,12): error TS2352: Conversion of type '{ type: "circle"; id: string; x: number; y: number; width: number; height: number; rotation: number; opacity: number; fill: string; stroke: string | undefined; stroke_width: number; group_id: string | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'CanvasObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.135   Type '{ type: "circle"; id: string; x: number; y: number; width: number; height: number; rotation: number; opacity: number; fill: string; stroke: string | undefined; stroke_width: number; group_id: string | null; ... 8 more ...; lock_acquired_at: string | null; }' is not comparable to type 'CircleObject'.
23:13:48.135     Types of property 'type_properties' are incompatible.
23:13:48.135       Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'CircleTypeProperties'.
23:13:48.135         Property 'radius' is missing in type 'Json[]' but required in type 'CircleTypeProperties'.
23:13:48.135 src/lib/supabase/sync.ts(64,12): error TS2352: Conversion of type '{ type: "text"; id: string; x: number; y: number; width: number; height: number; rotation: number; opacity: number; fill: string; stroke: string | undefined; stroke_width: number; group_id: string | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'CanvasObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.135   Type '{ type: "text"; id: string; x: number; y: number; width: number; height: number; rotation: number; opacity: number; fill: string; stroke: string | undefined; stroke_width: number; group_id: string | null; ... 8 more ...; lock_acquired_at: string | null; }' is not comparable to type 'TextObject'.
23:13:48.135     Types of property 'type_properties' are incompatible.
23:13:48.135       Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'TextTypeProperties'.
23:13:48.135         Type 'Json[]' is missing the following properties from type 'TextTypeProperties': text_content, font_size
23:13:48.135 src/lib/supabase/sync.ts(94,5): error TS2322: Type 'RectangleTypeProperties | CircleTypeProperties | TextTypeProperties' is not assignable to type 'Json | undefined'.
23:13:48.135   Type 'RectangleTypeProperties' is not assignable to type 'Json | undefined'.
23:13:48.135     Type 'RectangleTypeProperties' is not assignable to type '{ [key: string]: Json | undefined; }'.
23:13:48.135       Index signature for type 'string' is missing in type 'RectangleTypeProperties'.
23:13:48.135 src/lib/supabase/sync.ts(123,5): error TS2322: Type 'RectangleTypeProperties | CircleTypeProperties | TextTypeProperties' is not assignable to type 'Json | undefined'.
23:13:48.135   Type 'RectangleTypeProperties' is not assignable to type 'Json | undefined'.
23:13:48.135     Type 'RectangleTypeProperties' is not assignable to type '{ [key: string]: Json | undefined; }'.
23:13:48.135       Index signature for type 'string' is missing in type 'RectangleTypeProperties'.
23:13:48.135 src/lib/sync/CanvasSyncManager.ts(113,40): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.135 src/lib/sync/CanvasSyncManager.ts(118,40): error TS2339: Property 'data' does not exist on type 'FabricObject<Partial<FabricObjectProps>, SerializedObjectProps, ObjectEvents>'.
23:13:48.135 src/lib/sync/CanvasSyncManager.ts(143,7): error TS2554: Expected 1 arguments, but got 2.
23:13:48.135 src/lib/sync/CanvasSyncManager.ts(143,8): error TS7006: Parameter 'objects' implicitly has an 'any' type.
23:13:48.135 src/lib/sync/CanvasSyncManager.ts(143,17): error TS7006: Parameter 'prevObjects' implicitly has an 'any' type.
23:13:48.135 src/lib/sync/SyncManager.ts(59,14): error TS2352: Conversion of type '{ type: "circle"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'CanvasObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.136   Type '{ type: "circle"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' is not comparable to type 'CircleObject'.
23:13:48.136     Types of property 'type_properties' are incompatible.
23:13:48.136       Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'CircleTypeProperties'.
23:13:48.136         Property 'radius' is missing in type 'Json[]' but required in type 'CircleTypeProperties'.
23:13:48.136 src/lib/sync/SyncManager.ts(61,14): error TS2352: Conversion of type '{ type: "text"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'CanvasObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.136   Type '{ type: "text"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' is not comparable to type 'TextObject'.
23:13:48.136     Types of property 'type_properties' are incompatible.
23:13:48.136       Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'TextTypeProperties'.
23:13:48.136         Type 'Json[]' is missing the following properties from type 'TextTypeProperties': text_content, font_size
23:13:48.136 src/stores/slices/canvasSlice.ts(31,6): error TS6196: 'DbCanvasObjectInsert' is declared but never used.
23:13:48.136 src/stores/slices/canvasSlice.ts(64,14): error TS2352: Conversion of type '{ type: "circle"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'CircleObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.136   Types of property 'type_properties' are incompatible.
23:13:48.136     Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'CircleTypeProperties'.
23:13:48.136       Property 'radius' is missing in type 'Json[]' but required in type 'CircleTypeProperties'.
23:13:48.136 src/stores/slices/canvasSlice.ts(66,14): error TS2352: Conversion of type '{ type: "text"; id: string; x: number; y: number; width: number; height: number; rotation: number; group_id: string | null; z_index: number | null; fill: string; stroke: string | null; stroke_width: number | null; ... 8 more ...; lock_acquired_at: string | null; }' to type 'TextObject' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.136   Types of property 'type_properties' are incompatible.
23:13:48.136     Type 'string | number | true | { [key: string]: Json | undefined; } | Json[]' is not comparable to type 'TextTypeProperties'.
23:13:48.136       Type 'Json[]' is missing the following properties from type 'TextTypeProperties': text_content, font_size
23:13:48.136 src/stores/slices/canvasSlice.ts(319,7): error TS2578: Unused '@ts-expect-error' directive.
23:13:48.136 src/stores/slices/canvasSlice.ts(334,11): error TS2322: Type 'RectangleTypeProperties | CircleTypeProperties | TextTypeProperties | undefined' is not assignable to type 'Json | undefined'.
23:13:48.136   Type 'RectangleTypeProperties' is not assignable to type 'Json | undefined'.
23:13:48.136     Type 'RectangleTypeProperties' is not assignable to type '{ [key: string]: Json | undefined; }'.
23:13:48.136       Index signature for type 'string' is missing in type 'RectangleTypeProperties'.
23:13:48.136 src/stores/slices/canvasSlice.ts(670,24): error TS2352: Conversion of type 'string | number | boolean | { [key: string]: Json | undefined; } | Json[] | null' to type 'ViewportState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
23:13:48.136   Type 'Json[]' is missing the following properties from type 'ViewportState': zoom, panX, panY
23:13:48.136 src/stores/slices/historySlice.ts(48,11): error TS6133: 'get' is declared but its value is never read.
23:13:48.136 src/test/setup.ts(209,13): error TS6133: 'pathData' is declared but its value is never read.
23:13:48.268  ELIFECYCLE  Command failed with exit code 2.
23:13:48.288 Error: Command "pnpm run build" exited with 2